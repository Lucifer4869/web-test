<script setup>
import { onMounted } from 'vue';
import { useWebSocketStore } from '@/stores/websocket';
import { storeToRefs } from 'pinia';

const wsStore = useWebSocketStore();
const { clientInfoList } = storeToRefs(wsStore);

onMounted(() => {
    wsStore.connect();
});
</script>

<template>
  <div class="card">
    <h2 class="text-lg font-bold mb-2">ðŸ§¾ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­</h2>

    <DataTable
      :value="clientInfoList"
      :paginator="true"
      :rows="5"
      responsiveLayout="scroll"
      stripedRows
      class="p-datatable-sm"
    >
      <Column field="id" header="ðŸ†” ID" />
      <Column field="ip" header="ðŸ§¾ IP" />
      <Column field="origin" header="ðŸŒ Origin" />
      <Column field="user_agent" header="ðŸ–¥ï¸ User-Agent" />  
      <Column field="location" header="ðŸ“ Location" />
      <Column field="time" header="ðŸ•’ Time" />
    </DataTable>
  </div>
</template>
